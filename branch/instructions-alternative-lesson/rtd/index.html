

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Deploying Sphinx documentation to Read the Docs &mdash; Code documentation lesson  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/togglebutton.css" type="text/css" />
  <link rel="stylesheet" href="../_static/mystnb.css" type="text/css" />
  <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../_static/tabs.css" type="text/css" />
  <link rel="stylesheet" href="../_static/sphinx_lesson.css" type="text/css" />
  <link rel="stylesheet" href="../_static/sphinx_rtd_theme_ext_color_contrast.css" type="text/css" />
  <link rel="stylesheet" href="../_static/style.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/togglebutton.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script src="../_static/minipres.js"></script>
        <script src="../_static/tabs.js"></script>
        <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex/" />
    <link rel="search" title="Search" href="../search/" />
    <link rel="next" title="Hosting websites/homepages on GitHub Pages" href="../gh-pages/" />
    <link rel="prev" title="Sphinx and reStructuredText" href="../sphinx/" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../" class="icon icon-home"> Code documentation lesson
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search/" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">The lesson</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../wishlist/">Motivation and wishlist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/">Popular tools and solutions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sphinx/">Sphinx and reStructuredText</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Deploying Sphinx documentation to Read the Docs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#read-the-docs">Read the Docs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#typical-read-the-docs-workflow">Typical Read the Docs workflow</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../gh-pages/">Hosting websites/homepages on GitHub Pages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../in-code-documentation/">In-code documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../discussion/">Discussion after the exercises</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../guide/">Instructor guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license/">Credit and license</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../">Code documentation lesson</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../" class="icon icon-home"></a> &raquo;</li>
        
      <li>Deploying Sphinx documentation to Read the Docs</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            
              <a href="https://github.com/coderefinery/documentation/blob/main/content/rtd.md" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="deploying-sphinx-documentation-to-read-the-docs">
<h1>Deploying Sphinx documentation to Read the Docs<a class="headerlink" href="#deploying-sphinx-documentation-to-read-the-docs" title="Permalink to this headline">¶</a></h1>
<div class="admonition-questions questions admonition">
<p class="admonition-title">Questions</p>
<ul class="simple">
<li><p>How do Python projects deploy their documentation?</p></li>
<li><p>Can we use their solutions for projects which do not use Python?</p></li>
</ul>
</div>
<div class="admonition-objectives objectives admonition">
<p class="admonition-title">Objectives</p>
<ul class="simple">
<li><p>Create a basic workflow which you can take home and adapt for your project.</p></li>
</ul>
</div>
<div class="section" id="read-the-docs">
<h2><a class="reference external" href="https://readthedocs.org">Read the Docs</a><a class="headerlink" href="#read-the-docs" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Runs Sphinx and converts RST or Markdown to HTML and PDF and hosts them for you</p></li>
<li><p>Equations and images no problem</p></li>
<li><p>Layout can be styled</p></li>
<li><p>Many projects use <a class="reference external" href="https://readthedocs.org">Read the Docs</a> as their main site</p></li>
<li><p>It is no problem to serve using your own URL <code class="docutils literal notranslate"><span class="pre">http://myproject.org</span></code> instead of <code class="docutils literal notranslate"><span class="pre">http://myproject.readthedocs.io</span></code></p></li>
</ul>
<div class="section" id="typical-read-the-docs-workflow">
<h3>Typical Read the Docs workflow<a class="headerlink" href="#typical-read-the-docs-workflow" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Host source code with documentation sources on a public Git repository.</p></li>
<li><p>Each time you <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">push</span></code> to the repository, a <code class="docutils literal notranslate"><span class="pre">post-receive</span></code> hook triggers
Read the Docs to rebuild the documentation.</p></li>
<li><p>Read the Docs then clones the repository, runs Sphinx,
and rebuilds HTML and PDF.</p></li>
<li><p>No problem to build several branches (versions) of your documentation.</p></li>
</ul>
<hr class="docutils" />
<div class="admonition-exercise-deploy-sphinx-documentation-to-read-the-docs challenge admonition">
<p class="admonition-title">Exercise: Deploy Sphinx documentation to Read the Docs</p>
<p>In this exercise we will fork an example repository on GitHub/GitLab and
deploy it to Read the Docs. The example project contains a script for counting the frequency distribution of words in a given file and some documentation generated using Sphinx. For bigger projects, we will have much more source files.</p>
<p>We will use GitHub/GitLab for this exercise but it will also work with any Git repository with public read access.</p>
<ol class="simple">
<li><p>In the first step, we will fork the example repository and then clone the newly created repository to our laptop.</p></li>
<li><p>In the second step, we will enable the project on Read the Docs, then commit and push some changes and check that the documentation is automatically rebuilt.</p></li>
</ol>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-0-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-0-0-0" name="0-0" role="tab" tabindex="0">GitHub</button><button aria-controls="panel-0-0-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-1" name="0-1" role="tab" tabindex="-1">Gitlab</button></div><div aria-labelledby="tab-0-0-0" class="sphinx-tabs-panel" id="panel-0-0-0" name="0-0" role="tabpanel" tabindex="0"><p><strong>Step 1:</strong> Go to the <a class="reference external" href="https://github.com/coderefinery/word-count/generate">word-count project template</a>
and fork it to your namespace</p>
</div><div aria-labelledby="tab-0-0-1" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-1" name="0-1" role="tabpanel" tabindex="0"><p><strong>Step 1:</strong> Go to the <a class="reference external" href="https://gitlab.com/svenvanderburg/word-count">word-count project template</a>
and fork it to your namespace</p>
</div></div>
<p><strong>Clone the repository</strong></p>
<p>The repository contains following two folders, among few other files and folders:</p>
<ul class="simple">
<li><p><strong>source</strong> folder contains the source code</p></li>
<li><p><strong>doc</strong> folder contains the Sphinx documentation</p></li>
</ul>
<p>The doc folder contains the Sphinx configuration file (<code class="docutils literal notranslate"><span class="pre">conf.py</span></code>) and the index file (<code class="docutils literal notranslate"><span class="pre">index.rst</span></code>) and some contents (other RST files).
The <code class="docutils literal notranslate"><span class="pre">conf.py</span></code> file has been adjusted to be able to autogenerate documentation from sources.</p>
<p><strong>Build HTML pages locally</strong></p>
<p>Inside the cloned repository, build the documentation and verify the result in your browser:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ sphinx-build doc _build
</pre></div>
</div>
<p><strong>Test HTML pages links</strong></p>
<p>Inside the cloned repository, check the integrity of all external links:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sphinx-build doc -W -b linkcheck -d _build/doctrees _build/html
</pre></div>
</div>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-1-1-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-1-1-0" name="1-0" role="tab" tabindex="0">GitHub</button><button aria-controls="panel-1-1-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-1-1-1" name="1-1" role="tab" tabindex="-1">GitLab</button></div><div aria-labelledby="tab-1-1-0" class="sphinx-tabs-panel" id="panel-1-1-0" name="1-0" role="tabpanel" tabindex="0"><p><strong>Step 2:</strong> Enable the project on <a class="reference external" href="https://readthedocs.org">Read the Docs</a></p>
<p><strong>Import a project to Read the Docs by connecting to GitHub</strong></p>
<ul class="simple">
<li><p>Log into <a class="reference external" href="https://readthedocs.org">Read the Docs</a> and visit your <a class="reference external" href="https://readthedocs.org/dashboard/">dashboard</a></p></li>
<li><p>Click “Import a Project”</p></li>
<li><p>Select “Connect to GitHub”, and choose the word-count repository
(if you don’t see this check your <a class="reference external" href="https://readthedocs.org/accounts/social/connections/">connections</a></p></li>
<li><p>Rename the project to user-word-count (replacing “user” with your GitHub username: we need a unique project name)</p></li>
<li><p>Click “Next”</p></li>
</ul>
</div><div aria-labelledby="tab-1-1-1" class="sphinx-tabs-panel" hidden="true" id="panel-1-1-1" name="1-1" role="tabpanel" tabindex="0"><p><strong>Step 2:</strong> Enable the project on <a class="reference external" href="https://readthedocs.org">Read the Docs</a></p>
<p><strong>Import a project to Read the Docs by connecting to GitLab</strong></p>
<ul class="simple">
<li><p>Log into <a class="reference external" href="https://readthedocs.org">Read the Docs</a> and visit your <a class="reference external" href="https://readthedocs.org/dashboard/">dashboard</a></p></li>
<li><p>Click “Import a Project”</p></li>
<li><p>Select “Connect to GitLab”, and choose the word-count repository
(if you don’t see this check your <a class="reference external" href="https://readthedocs.org/accounts/social/connections/">connections</a></p></li>
<li><p>Rename the project to user-word-count (replacing “user” with your GitLab username: we need a unique project name)</p></li>
<li><p>Click “Next”</p></li>
</ul>
</div></div>
<p><strong>Verify the result</strong></p>
<p>That’s it! Your site should now be live on
http://user-word-count.readthedocs.io (replace project name).</p>
<p><strong>Verify refreshing the documentation</strong></p>
<p>Finally, make some changes to your documentation</p>
<ul class="simple">
<li><p>Add documentation related to other functions</p></li>
<li><p>Prerequisites and how to use the program</p></li>
<li><p>Rules for contribution</p></li>
<li><p>Some example results (figures, tables, …)</p></li>
<li><p>Commit and push them, and verify that the documentation website refreshes after your changes (can take few seconds or a minute)</p></li>
</ul>
</div>
<div class="admonition-do-not-add-the-generated-build-directory-to-your-repository callout admonition">
<p class="admonition-title">Do not add the generated build directory to your repository</p>
<p>The <code class="docutils literal notranslate"><span class="pre">_build</span></code> directory is generated locally with the command <code class="docutils literal notranslate"><span class="pre">sphinx-build</span> <span class="pre">doc</span> <span class="pre">_build</span></code> and allows you to check the content locally but it should not be part of the Git repository.
We recommend to add <code class="docutils literal notranslate"><span class="pre">_build</span></code> to <code class="docutils literal notranslate"><span class="pre">.gitignore</span></code> to prevent you from accidentally adding files below <code class="docutils literal notranslate"><span class="pre">_build</span></code> to the Git repository.</p>
</div>
<div class="admonition-running-your-own-sphinx-server callout admonition">
<p class="admonition-title">Running your own sphinx server</p>
<p>We recommend to use Read the Docs to host your documentation but if you prefer, you can host your own Sphinx server.
If you want to know more about it, look at:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.readthedocs.io/en/latest/install.html">https://docs.readthedocs.io/en/latest/install.html</a></p></li>
<li><p><a class="reference external" href="https://pypi.org/project/sphinx-autobuild/">https://pypi.org/project/sphinx-autobuild/</a></p></li>
<li><p><a class="reference external" href="https://pypi.org/project/sphinx-server/">https://pypi.org/project/sphinx-server/</a></p></li>
</ul>
</div>
<div class="admonition-migrating-your-own-documentation-to-sphinx-read-the-docs callout admonition">
<p class="admonition-title">Migrating your own documentation to Sphinx/ Read the Docs</p>
<ul class="simple">
<li><p>First convert your documentation to RST using <a class="reference external" href="https://pandoc.org">Pandoc</a></p></li>
<li><p>Create a file <code class="docutils literal notranslate"><span class="pre">index.rst</span></code> which lists all other RST files and provides the
table of contents.</p></li>
<li><p>Add a <code class="docutils literal notranslate"><span class="pre">conf.py</span></code> file. You can generate a starting point for <code class="docutils literal notranslate"><span class="pre">conf.py</span></code> and
<code class="docutils literal notranslate"><span class="pre">index.rst</span></code> with <code class="docutils literal notranslate"><span class="pre">sphinx-quickstart</span></code>, or you can take the examples in this
lesson as inspiration.</p></li>
<li><p>Test building the documentation locally with <code class="docutils literal notranslate"><span class="pre">sphinx-build</span></code>.</p></li>
<li><p>Once this works, enable the project on Read the Docs and try to push a change to your documentation.</p></li>
</ul>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../gh-pages/" class="btn btn-neutral float-right" title="Hosting websites/homepages on GitHub Pages" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../sphinx/" class="btn btn-neutral float-left" title="Sphinx and reStructuredText" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, CodeRefinery team.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>